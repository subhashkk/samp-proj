# Usage

## Example

```
npm install Voya-Financial/voya-builder
```

```js
var jspm = require('jspm');

// build everything to dist
gulp.task('build:dist', function () {
    return voyaBuilder({
        mainBundles: {
            main: {
                includes: [
                    'src/app/main',
                    'src/app/helpers/popPDF'
                ]
            },
            highcharts: {
                includes: [
                    'highcharts',
                    'components/donutChart/donutChart-view'
                ]
            }
        },
        autoBundles: ['src/app/modules'],
        base: '/dist',
        bundleDest: 'static/evoyaenroll/js/bundles/',
        configDest: 'static/evoyaenroll/js/app/config.js',
    }, jspm);
});

// only build the main and highcharts bundles for dev
// watch the filesystem for changes
// it may be useful to use logStyle: 'generic' for dev
gulp.task('build:dev', function () {
    return voyaBuilder({
        mainBundles: {
            main: {
                includes: [
                    'src/app/main',
                    'src/app/helpers/popPDF'
                ]
            },
            highcharts: {
                includes: [
                    'highcharts',
                    'components/donutChart/donutChart-view'
                ]
            }
        },
        base: '',
        bundleDest: 'static/evoyaenroll/js/bundles/',
        configDest: 'static/evoyaenroll/js/app/config.js',
        watch: true,
        logStyle: 'generic'
    }, jspm);
});
```

## Options

**`{Object} mainBundles`** an object containing main bundle configuration objects. These values are `bundleCfg` objects, keyed by the name of the bundle. See the `bundleCfg` section below for more info.

```js
mainBundles: {
    highcharts: {
        includes: [
            'highcharts',
            'highstocks',
            'src/app/components/some-graph'
        ],
        excludes: []
    },
    core: {
        includes: [
            'src/app/main',
            'src/app/core'
        ],
        excludes: [
            'highstocks'
        ]
    }
}
```

**`{Array<String>} autoBundles`** an array of directories to build autobundles from. In many projects, this will typically be used for a `modules` directory. Each child directory of these autobundle paths will be built into it's own bundle.

**`{String} bundleDest`** the directory where bundles should be placed

**`{String} configDest`** the path (including filename) where the bundle config file should be built to

**`{Boolean} watch`** if `true`, bundles will be actively watched and rebuilt as files are changed

**`{String} base`** the base directory that files should be built to. If you are running a production build, set `base` to `'dist/'` so all files are built to `'dist/static/project/js/bundles'`

**`{Boolean=false} sourceMaps`** if `true`, sourceMaps will be generated for the bundles

**`{String} logStyle`** keep this `undefined` for the repainting logger. If you do not want the logger to repaint the terminal on update, pass `'generic'` as the value for this option

## `bundleCfg` object

**`{String} name`** the name of this bundle
**`{Array<String>} includes`** an array of included modules
**`{Array<String>=[]} excludes`** an array of excluded modules
